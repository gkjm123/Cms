# 온라인 쇼핑몰 서비스
물건을 등록하고 구매 가능한 소셜커머스 시스템입니다.

### 프로젝트 기능 및 설계

* 회원가입 기능
  * 사용자는 판매자와 구매자로 구분되며 회원가입,로그인이 필요합니다.
  * 회원가입시 이메일, 이름, 패스워드, 생일, 전화번로를 입력받습니다.
  * Mailgun, OpenFeign 을 이용해 이메일로 인증링크가 전송되며 클릭시 계정이 인증됩니다.
  * JWT 를 이용해 로그인을 진행 합니다.
 
* 상품등록 기능
  * 판매자는 상품을 등록할 수 있으며 MySQL DB 에 저장됩니다.
  * 상품의 이름, 설명, ProductIetm 리스트 를 입력받습니다.
  * ProductItem 은 한 상품에 대해 선택 가능한 옵션 목록이며  
    옵션명, 이름, 가격, 개수를 포함합니다.
  * 상품을 조회, 수정, 삭제 할 수 있습니다.
  * 옵션을 조회, 추가, 수정, 삭제 할 수 있습니다.
 
* 계좌 기능
  * 구매자는 계좌 충전을 사용해 계좌에 잔액을 충전할 수 있습니다.
  * 출처, 메시지, 금액을 입력받습니다.
  * 계좌 충전 또는 잔액사용 시 History table에 고객, 사용금액, 잔액, 메시지, 설명이 기록됩니다.
 
* 상품조회 기능
  * QueryDSL 을 이용해 검색어를 포함하는 상품을 검색합니다.
  * 상품ID 를 통해 상품정보를 조회할 수 있습니다.

* 상품구매 기능
  * 구매자는 상품을 장바구니에 담고 구매할 수 있습니다.
  * 상품ID, 옵션리스트를 입력해 원하는 상품과 옵션을 장바구니에 담습니다.
  * 같은 상품이 장바구니에 있다면 이전 상품과, 새로 담은 상품의 정보(수량, 가격)를 비교하여  
    달라진게 있으면 알림 메시지 리스트에 추가합니다.
  * 같은 상품, 같은 옵션을 하나로 합쳐 장바구니를 업데이트 합니다.
  * 장바구니 정보는 RedisTemplete 을 이용해 사용자별로 저장합니다.
 
* 장바구니 기능
  * 장바구니 조회시 담겨있는 상품을 현제 시각 실제 상품정보와 비교해 업데이트(Refresh) 합니다.
  * 번경 사항은 알림 메시지로 사용자에게 전달합니다.
 
* 결제 기능
  * 장바구니를 Refresh 한 뒤, 알림 메시지가 있다면(변경사항이 있다면) 결제가 이뤄지지 않습니다.
  * 알림 확인후 업데이트 된 장바구니로 다시 결제를 할 수 있습니다.
  * 구매자의 계좌 잔액이 주문금액보다 큰지 확인후 결제가 완료되고 금액이 차감됩니다.
 
### ERD
![customer](https://github.com/user-attachments/assets/794e8a6e-5a67-428d-8909-42c81ade1cce)
![order](https://github.com/user-attachments/assets/8af42cb0-23dc-4a37-94d3-7dea84a32599)




### 사용 기술
* MySQL, Redis, OpenFeign, JWT, QueryDSL, Envers
